<div class="container">
    <nav class="navbar navbar-expand-sm navbar-light">
        <ul class="navbar navbar-nav">
            <li>
                <button (click)="onGetAllProduct()" class="btn btn-sm btn-outline-info ml-4">All</button>
            </li>
            <li>
                <button (click)="onGetSelectedProduct()" class="btn btn-sm btn-outline-info ml-2">Selected</button>
            </li>
            <li>
                <button (click)="onGetAvailableProduct()" class="btn btn-sm btn-outline-info ml-2">Available</button>
            </li>
            <li>
                <button (click)="onAddNewProduct()" class="btn btn-sm btn-outline-info ml-2">New</button>
            </li>
        </ul>


        <ul class="navbar navbar-nav ml-auto">
            <li>
                <form #f="ngForm" (ngSubmit)="onSearch(f.value)" class="form-inline">
                    <input type="text" ngModel name="keyword">
                    <button type="submit" class="btn btn-info btn-sm ml-2">
                        <span class="fa fa-search"></span>
                    </button>
                </form>    
            </li>
        </ul>
    </nav>


    <ng-container *ngIf="(products$ | async) as result" [ngSwitch]="result.dataState">
        <ng-container *ngSwitchCase="DataStateEnum.LOADING">
            LOADING ...
        </ng-container>
        <ng-container *ngSwitchCase="DataStateEnum.ERROR">
            <div class="col-12 text-center">
                <div class="alert alert-danger">
                    {{result.errorMessage}}
                </div>
            </div>
        </ng-container>
        <ng-container *ngSwitchCase="DataStateEnum.LOADED">
            <ng-container *ngIf="result.data && result.data.length > 0">
                <table class="table">
                    <tr>
                        <th>ID</th><th>Name</th><th>Price</th><th>Quantity</th><th>Available</th>
                    </tr>
                    <tr *ngFor="let product of result.data">
                        <td>{{product.id}}</td>
                        <td>{{product.name}}</td>
                        <td>{{product.price}}</td>
                        <td>{{product.quantity}}</td>
                        <td>{{product.available}}</td>
                        <td>
                            <button (click)="onSelect(product)" [ngClass]="product.selected ? 'btn-outline-danger': 'btn-outline-success'" class="btn">
                                <div *ngIf="product.selected">Unselect</div>
                                <div *ngIf="!product.selected">Select</div>
                            </button>
                        </td>
                        <td>
                            <button type="button" class="btn btn-sm btn-danger" (click)="onDeleteProduct(product.id)">
                                <span class="fa fa-trash-o"></span>
                            </button>
                        </td>
                    </tr>
                </table>
            </ng-container>
            <ng-container *ngIf="!result.data || result.data.length === 0">
                No products available.
            </ng-container>    
        </ng-container>
    </ng-container>
</div>